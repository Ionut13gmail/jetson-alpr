# =============================================================================
# ALPR Service Configuration - PanoramaCity
# =============================================================================
# Copy this file to .env and edit with your settings:
#   cp .env.example .env
#   nano .env
# =============================================================================

# -----------------------------------------------------------------------------
# Service Mode
# -----------------------------------------------------------------------------
# 'api' = PanoramaCity API (default) - uploads to cloud, controls gates
# 'ftp' = Legacy FTP upload mode
ALPR_MODE=api

# -----------------------------------------------------------------------------
# PanoramaCity API Settings (API mode)
# -----------------------------------------------------------------------------
ALPR_API_URL=https://acces.panoramacity.ro/utilitypagesAPI/_x_ApI_nano.php
ALPR_API_KEY=A954C6A5-5207-4DF8-91BC-E9E3B73664BF

# Cache TTL for plate database (seconds)
ALPR_CACHE_TTL=3600

# API request timeout (seconds)
ALPR_REQUEST_TIMEOUT=10

# JPEG quality for uploaded images (0-100)
ALPR_JPEG_QUALITY=70

# -----------------------------------------------------------------------------
# Gate Control Settings
# -----------------------------------------------------------------------------
# Enable gate control (true/false)
ALPR_GATE_ENABLED=false

# Gate barrier IPs
ALPR_GATE1_IP=192.168.1.230
ALPR_GATE2_IP=192.168.1.234

# -----------------------------------------------------------------------------
# FTP Server Settings (FTP mode - legacy)
# -----------------------------------------------------------------------------
# Where annotated images are uploaded after processing
ALPR_FTP_HOST=192.168.100.238
ALPR_FTP_USER=photo
ALPR_FTP_PASS=photo
ALPR_FTP_DIR=/

# -----------------------------------------------------------------------------
# Test Mode
# -----------------------------------------------------------------------------
# When true: no API calls, just detection and live preview
ALPR_TEST_MODE=true

# Live preview HTTP port (http://<jetson-ip>:8080)
ALPR_PREVIEW_PORT=8080

# -----------------------------------------------------------------------------
# Detection Settings
# -----------------------------------------------------------------------------
# Confidence threshold for plate detection (0.0 - 1.0)
# Lower = more detections but more false positives
# Higher = fewer detections but more accurate
ALPR_CONF_THRESH=0.4

# Delete source images after processing (true/false)
ALPR_DELETE_PROCESSED=true

# -----------------------------------------------------------------------------
# Enhanced Detection (vehicle detection for distant plates)
# -----------------------------------------------------------------------------
# Requires yolov8n.onnx model in models/ folder
ALPR_ENHANCED_DETECTION=false
ALPR_MIN_PLATE_SIZE=30
ALPR_VEHICLE_CONF_THRESH=0.3

# Crop margins for enhanced detection (0.0-0.5 = percentage of image)
# Use when car is centered and you want to ignore image edges
ALPR_ENHANCED_CROP_LEFT=0.0
ALPR_ENHANCED_CROP_RIGHT=0.0
ALPR_ENHANCED_CROP_TOP=0.0
ALPR_ENHANCED_CROP_BOTTOM=0.0

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR
ALPR_LOG_LEVEL=INFO

# Log to file (leave empty for stdout only)
# ALPR_LOG_FILE=/var/log/alpr.log

# -----------------------------------------------------------------------------
# Watch Directories
# -----------------------------------------------------------------------------
# Use /dev/shm for RAM-based storage (protects SD card)
ALPR_WATCH_DIR=/dev/shm/alpr_inbox
ALPR_OUTPUT_DIR=/dev/shm/alpr_outbox

# -----------------------------------------------------------------------------
# Docker Settings
# -----------------------------------------------------------------------------
CONTAINER_NAME=alpr-service
IMAGE_NAME=alpr-service:latest

# -----------------------------------------------------------------------------
# Camera FTP Settings (for vsftpd on this Jetson)
# -----------------------------------------------------------------------------
# These are used by the setup script when configuring vsftpd
# Camera should upload to: ftp://ftpcamera:camera123@<jetson-ip>/
# FTP_CAMERA_USER=ftpcamera
# FTP_CAMERA_PASS=camera123
